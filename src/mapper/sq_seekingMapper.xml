<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sq_seekingMapper">

	<select id="selectAll_sq_recruit" resultType="SQ_recruit">
		SELECT * FROM SQ_RECRUIT ORDER BY SQ_RECRUIT_ID DESC
	</select>
	
	<select id="selectOne_sq_recruit_artist" parameterType="int" resultType="SQ_recruit_artist">
		SELECT  
			SQ_R.SQ_MEMBER_ID,SQ_M.SQ_MEMBER_NAME,SQ_M.SQ_MEMBER_EMAIL
			,SQ_A.SQ_ARTIST_PHONE,SQ_A.SQ_ARTIST_PHOTO,SQ_A.SQ_ARTIST_INTRO 
			,SQ_R.SQ_RECRUIT_ID,SQ_R.SQ_RECRUIT_TITLE,SQ_R.SQ_RECRUIT_LOCATION
			,SQ_R.SQ_RECRUIT_LATITUDE,SQ_R.SQ_RECRUIT_LONGITUDE
			,SQ_R.SQ_RECRUIT_PART, SQ_R.SQ_RECRUIT_GENRE
			,SQ_R.SQ_RECRUIT_INPUT_DATE
			,SQ_R.SQ_RECRUIT_DATE
			,SQ_R.SQ_RECRUIT_INFO
		FROM 
			SQ_RECRUIT SQ_R, SQ_MEMBER SQ_M, SQ_ARTIST SQ_A 
		WHERE 
			SQ_R.SQ_RECRUIT_ID = #{id}
		AND
			SQ_R.SQ_MEMBER_ID = SQ_M.SQ_MEMBER_ID
		AND 
			SQ_M.SQ_MEMBER_ID = SQ_A.SQ_MEMBER_ID
	</select>
	
	<insert id="insertSQrecruit" parameterType="SQ_recruit">
		INSERT INTO sq_recruit
		(sq_recruit_id, sq_member_id,sq_recruit_title,sq_recruit_input_date,sq_recruit_part,sq_recruit_photo,sq_recruit_photo_original,sq_recruit_genre,sq_recruit_date,sq_recruit_location,sq_recruit_latitude,sq_recruit_longitude,sq_recruit_info)
		values(SQ_RECRUIT_ID_SQ.nextval,#{sq_member_id},#{sq_recruit_title},sysdate,#{sq_recruit_part},#{sq_recruit_photo},#{sq_recruit_photo_original},#{sq_recruit_genre},#{sq_recruit_date},#{sq_recruit_location},#{sq_recruit_latitude},#{sq_recruit_longitude},#{sq_recruit_info})
	</insert>
	
	<delete id="deleteSQrecruit" parameterType="String">
		DELETE from sq_recruit where sq_recruit_id=#{sq_recruit_id}
	</delete>
	
	<select id="selectList_applied" parameterType="int" resultType="SQ_recruit_artist">
		SELECT * FROM SQ_RECRUIT_ARTIST WHERE SQ_RECRUIT_ID = #{id}
	</select>
	
	<insert id="insertApply" parameterType="SQ_recruit_apply">
		INSERT INTO SQ_RECRUIT_APPLY 
			VALUES 
				(
					SQ_RECRUIT_APPLY_ID_SQ.NEXTVAL
					, #{sq_recruit_id}
					, #{sq_member_id}
				) 
	</insert>
	
	<update id="updateRecruit" parameterType="SQ_recruit">
		UPDATE SQ_RECRUIT 
			SET 
				SQ_RECRUIT_TITLE = #{title}
				, SQ_RECRUIT_PART = #{part}
				, SQ_RECRUIT_PHOTO = #{photo}
				, SQ_RECRUIT_PHOTO_ORIGINAL = #{original}
				, SQ_RECRUIT_GENRE = #{genre}
				, SQ_RECRUIT_DATE = #{date}
				, SQ_RECRUIT_LOCATION = #{location}
				, SQ_RECRUIT_LATITUDE = #{latitude}
				, SQ_RECRUIT_LONGITUDE = #{longitude}
				, SQ_RECRUIT_INFO = #{info}
			WHERE
				SQ_RECRUIT_ID = #{recruit_id}
	</update>
	
	<delete id="deleteRecruit" parameterType="int">
		DELETE SQ_RECRUIT WHERE SQ_RECRUIT_ID = #{recruit_id}
	</delete>
	
	<select id="selectOne_apply" parameterType="SQ_recruit_artist" resultType="SQ_recruit_apply">
		SELECT * FROM SQ_RECRUIT_APPLY
			WHERE SQ_MEMBER_ID = #{sq_member_id} AND SQ_RECRUIT_ID = #{sq_recruit_id}
	</select>
	
	<select id="delete_apply" parameterType="int">
		DELETE FROM SQ_RECRUIT_APPLY
			WHERE SQ_RECRUIT_APPLY_ID = #{sq_recruit_apply_id}
	</select>
	
	<select id="selectOne_port" parameterType="string" resultType="SQ_portfolio">
		SELECT * FROM SQ_PORTFOLIO WHERE SQ_MEMBER_ID = #{sq_member_id}
	</select>
</mapper>
	